{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\uBB38\\uB3D9\\uC6B1\\\\Desktop\\\\Wab-project\\\\Owner\\\\2022_2_WAP_WEB_TEAM7\\\\src\\\\Menu\\\\MenuEdit\\\\Home.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginCheck = props => {\n  _s();\n  const [cookies, setCookie, removeCookie] = useCookies([\"id\"]);\n  const [userID, setUserId] = useState(null);\n  const navigate = useNavigate();\n  const authCheck = () => {\n    // 페이지에 들어올때 쿠키로 사용자 체크\n    const token = cookies.id; // 쿠키에서 id 를 꺼내기\n    axios.post(\"/users/loginCheck\", {\n      token: token\n    }) // 토큰으로 서버에 인증 요청\n    .then(res => {\n      setUserId(res.data.id); // 유저 아이디 표시를 위해 작성\n    }).catch(() => {\n      logOut(); // 에러 발생시 실행\n    });\n  };\n\n  useEffect(() => {\n    authCheck(); // 로그인 체크 함수\n  });\n\n  const logOut = () => {\n    removeCookie(\"id\"); // 쿠키를 삭제\n    navigate(\"/\"); // 메인 페이지로 이동\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [userID && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: userID\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 18\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), \"// \\uB85C\\uADF8\\uC778 \\uB418\\uC5B4\\uC788\\uC73C\\uBA74 \\uC544\\uC774\\uB514 \\uD45C\\uC2DC\", /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logOut,\n      children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), \" // \\uB85C\\uADF8\\uC544\\uC6C3 \\uBC84\\uD2BC\"]\n  }, void 0, true);\n};\n_s(LoginCheck, \"sRg29IX5fdDU8NBXVER0HDr+vuU=\", false, function () {\n  return [useCookies, useNavigate];\n});\n_c = LoginCheck;\nexport default LoginCheck;\nvar _c;\n$RefreshReg$(_c, \"LoginCheck\");","map":{"version":3,"names":["axios","React","useEffect","useState","useCookies","useNavigate","LoginCheck","props","cookies","setCookie","removeCookie","userID","setUserId","navigate","authCheck","token","id","post","then","res","data","catch","logOut"],"sources":["C:/Users/문동욱/Desktop/Wab-project/Owner/2022_2_WAP_WEB_TEAM7/src/Menu/MenuEdit/Home.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst LoginCheck = (props) => {\r\n  const [cookies, setCookie, removeCookie] = useCookies([\"id\"]);\r\n  const [userID, setUserId] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const authCheck = () => {\r\n    // 페이지에 들어올때 쿠키로 사용자 체크\r\n    const token = cookies.id; // 쿠키에서 id 를 꺼내기\r\n    axios\r\n      .post(\"/users/loginCheck\", { token: token }) // 토큰으로 서버에 인증 요청\r\n      .then((res) => {\r\n        setUserId(res.data.id); // 유저 아이디 표시를 위해 작성\r\n      })\r\n      .catch(() => {\r\n        logOut(); // 에러 발생시 실행\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    authCheck(); // 로그인 체크 함수\r\n  });\r\n\r\n  const logOut = () => {\r\n    removeCookie(\"id\"); // 쿠키를 삭제\r\n    navigate(\"/\"); // 메인 페이지로 이동\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {userID && <h1>{userID}</h1>}\r\n      <p></p>// 로그인 되어있으면 아이디 표시\r\n      <button onClick={logOut}>로그아웃</button> // 로그아웃 버튼\r\n    </>\r\n  );\r\n};\r\nexport default LoginCheck;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,WAAW,QAAQ,kBAAkB;AAAC;AAAA;AAE/C,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAAA;EAC5B,MAAM,CAACC,OAAO,EAAEC,SAAS,EAAEC,YAAY,CAAC,GAAGN,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC;EAC7D,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAMU,QAAQ,GAAGR,WAAW,EAAE;EAE9B,MAAMS,SAAS,GAAG,MAAM;IACtB;IACA,MAAMC,KAAK,GAAGP,OAAO,CAACQ,EAAE,CAAC,CAAC;IAC1BhB,KAAK,CACFiB,IAAI,CAAC,mBAAmB,EAAE;MAAEF,KAAK,EAAEA;IAAM,CAAC,CAAC,CAAC;IAAA,CAC5CG,IAAI,CAAEC,GAAG,IAAK;MACbP,SAAS,CAACO,GAAG,CAACC,IAAI,CAACJ,EAAE,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,CACDK,KAAK,CAAC,MAAM;MACXC,MAAM,EAAE,CAAC,CAAC;IACZ,CAAC,CAAC;EACN,CAAC;;EAEDpB,SAAS,CAAC,MAAM;IACdY,SAAS,EAAE,CAAC,CAAC;EACf,CAAC,CAAC;;EAEF,MAAMQ,MAAM,GAAG,MAAM;IACnBZ,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC;IACpBG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;EACjB,CAAC;;EAED,oBACE;IAAA,WACGF,MAAM,iBAAI;MAAA,UAAKA;IAAM;MAAA;MAAA;MAAA;IAAA,QAAM,eAC5B;MAAA;MAAA;MAAA;IAAA,QAAO,uGACP;MAAQ,OAAO,EAAEW,MAAO;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAc;EAAA,gBACrC;AAEP,CAAC;AAAC,GAlCIhB,UAAU;EAAA,QAC6BF,UAAU,EAEpCC,WAAW;AAAA;AAAA,KAHxBC,UAAU;AAmChB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}